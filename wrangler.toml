name = "faircount-api"
main = "src/workers/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = "dist"

# Development settings
[dev]
port = 8787

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "faircount-db"
database_id = "local" # Will be replaced with actual ID in production
migrations_dir = "drizzle/migrations"

# R2 Storage (for avatars, exports) - uncomment when ready
# [[r2_buckets]]
# binding = "STORAGE"
# bucket_name = "faircount-storage"

# Environment variables (secrets should be set via wrangler secret)
[vars]
APP_URL = "http://localhost:3000"
APP_NAME = "FairCount"

# Production environment
[env.production]
vars = { APP_URL = "https://faircount.app" }
